# Импорт шаблонов в админку

Этот скрипт импортирует существующие шаблоны из `app-5zn-logic.js` в базу данных для редактирования в админке.

## Шаги для импорта

### Локально

1. Убедитесь, что переменная окружения `DATABASE_URL` установлена:
   ```bash
   export DATABASE_URL="postgresql://user:password@host:port/database"
   ```

2. Запустите скрипт импорта:
   ```bash
   python3 import_templates.py
   ```

### На Railway

1. Скрипт автоматически использует переменные окружения Railway:
   - `DATABASE_URL` - публичный URL базы данных
   - `DATABASE_PRIVATE_URL` - внутренний URL (используется автоматически, если доступен - быстрее и безопаснее)

2. **Вариант 1: Через Railway CLI** (рекомендуется для первого запуска):
   ```bash
   railway run python3 import_templates.py
   ```

3. **Вариант 2: Через Railway Dashboard**:
   - Откройте ваш проект в Railway
   - Перейдите в раздел "Deployments" или "Services"
   - Найдите ваш сервис и откройте консоль
   - Выполните: `python3 import_templates.py`

4. **Вариант 3: Автоматический запуск при деплое** (опционально):
   Можно добавить в `Procfile` или в скрипт деплоя, но обычно импорт делается один раз вручную.

5. Скрипт автоматически:
   - Создаст клубы "NOT IN PARIS" и "HEDONISM" в БД (если их еще нет)
   - Импортирует все шаблоны из `app-5zn-logic.js`
   - Преобразует простые шаблоны в полную структуру админки (pages, layers, elements)

## Что делает скрипт

- Парсит шаблоны из метода `getTemplateDefinitions()` в `app-5zn-logic.js`
- Создает структуру шаблонов с pages и layers для редактирования в админке
- Сохраняет шаблоны в таблицу `templates` в БД
- Преобразует конфигурацию шаблонов (backgroundMode, fontColor, isMono) в структуру админки

## После импорта

После успешного импорта вы сможете:
- Видеть все шаблоны в админке по адресу `/route/admin`
- Редактировать существующие шаблоны через графический редактор
- Создавать новые шаблоны для каждого клуба

## Примечания

- Скрипт не перезаписывает существующие шаблоны (пропускает их)
- Если нужно переимпортировать, сначала удалите шаблоны из БД
- Таблицы `clubs` и `templates` создаются автоматически при запуске сервера (через `admin_schema.sql`)

