# Исправление несоответствия шаблонов

## Проблема

**В приложении** у NOT IN PARIS 3 шаблона:
- Classic Route
- Mono Cut  
- Sunset Fade

**В админке** один опубликованный и 2 черновика (возможно, другие шаблоны).

## Почему так происходит?

Основное приложение показывает **хардкод фолбэк-шаблоны** из кода, если:
- API не возвращает шаблоны из базы данных
- База данных пуста или недоступна
- Нет опубликованных шаблонов

Админка показывает **реальные данные из PostgreSQL**.

## Решение в 3 шага

### 1️⃣ Подключитесь к серверу

**Если приложение на Railway:**
```bash
# Railway Dashboard → Your Project → Terminal
```

**Если локально:**
```bash
# Получите DATABASE_URL из Railway Dashboard
export DATABASE_URL="postgresql://postgres:пароль@хост:порт/railway"
```

### 2️⃣ Запустите скрипт синхронизации

```bash
python3 sync_fallback_templates.py
```

Скрипт:
- ✅ Создаст в БД фолбэк-шаблоны (Classic Route, Mono Cut, Sunset Fade)
- ✅ Установит статус `published`
- ✅ Покажет итоговую статистику

### 3️⃣ Обновите приложения

- **Основное приложение:** `/route/` → Ctrl+Shift+R
- **Админка:** `/route/admin` → Ctrl+Shift+R

## Результат

После синхронизации:

| Приложение | Что показывается |
|------------|------------------|
| Основное `/route/` | ✅ Classic Route, Mono Cut, Sunset Fade (из БД) |
| Админка `/route/admin` | ✅ Classic Route, Mono Cut, Sunset Fade (published) |
| API | ✅ 3 шаблона со статусом published |

## Проверка

```bash
# Проверить, что в БД:
python3 check_templates.py

# Проверить API:
curl "https://ваш-домен/api/templates?clubId=not-in-paris"
```

## Важно!

После синхронизации:
1. ✅ Можно создавать новые шаблоны через админку
2. ✅ Не забывайте публиковать (status = published)
3. ✅ Черновики видны только в админке
4. ✅ Фолбэк-шаблоны останутся в коде как резерв

## Подробности

См. подробную документацию:
- `QUICK_FIX_TEMPLATES.md` - Быстрая инструкция
- `РЕШЕНИЕ_ПРОБЛЕМЫ_ШАБЛОНОВ.md` - Детальное объяснение
- `docs/TEMPLATE_SYNC_FIX.md` - Техническая документация

