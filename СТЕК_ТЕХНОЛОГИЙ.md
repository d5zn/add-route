# üõ†Ô∏è –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –ø—Ä–æ–µ–∫—Ç–∞ 5zn-web (addicted)

–ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π, –±–∏–±–ª–∏–æ—Ç–µ–∫ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –≤ –ø—Ä–æ–µ–∫—Ç–µ.

## üìã –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ **—Ç—Ä–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö —á–∞—Å—Ç–µ–π**:
1. **–û—Å–Ω–æ–≤–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** (Vanilla JavaScript)
2. **React Admin Panel** (TypeScript + React)
3. **Backend —Å–µ—Ä–≤–µ—Ä** (Python HTTP Server)

---

## üé® Frontend: –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

**–Ø–∑—ã–∫/–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:**
- **JavaScript (ES6+)** - Vanilla JavaScript –±–µ–∑ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤
- **HTML5** - –†–∞–∑–º–µ—Ç–∫–∞
- **CSS3** - –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ú–æ–±–∏–ª—å–Ω–æ-–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
- Progressive Web App (PWA) –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –û—Ñ–ª–∞–π–Ω-–ø–æ–¥–¥–µ—Ä–∂–∫–∞ —á–µ—Ä–µ–∑ service workers
- Canvas –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∫–∞—Ä—Ç –∏ –≥—Ä–∞—Ñ–∏–∫–∏

### –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```json
{
  "@mapbox/polyline": "^1.2.1"  // –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–∏–ª–∏–Ω–∏–π Strava
}
```

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `app-addicted-logic.js` - –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `addicted-canvas-component.js` - Canvas –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `addicted-store.js` - State management
- `polyline.js` - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –ø–æ–ª–∏–ª–∏–Ω–∏—è–º–∏

### Canvas –∏ –≥—Ä–∞—Ñ–∏–∫–∞

- **HTML5 Canvas API** - –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- **Custom Canvas –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** - –°–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å canvas

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

- **Strava API** - OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞—Ö
- **Mapbox Polyline** - –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤

---

## ‚öõÔ∏è Frontend: React Admin Panel

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

**–Ø–∑—ã–∫:**
- **TypeScript 5.9.3** - –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JavaScript

**–§—Ä–µ–π–º–≤–æ—Ä–∫:**
- **React 18.3.1** - UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- **React Router 6.28.0** - –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è

**Build —Å–∏—Å—Ç–µ–º–∞:**
- **Vite 7.1.7** - –ë—ã—Å—Ç—Ä—ã–π —Å–±–æ—Ä—â–∏–∫ –∏ dev-—Å–µ—Ä–≤–µ—Ä
- **TypeScript Compiler** - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤

### UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

```json
{
  "@mui/material": "^7.3.5",              // Material-UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
  "@mui/icons-material": "^7.3.5",        // Material Icons
  "@emotion/react": "^11.14.0",           // CSS-in-JS –¥–ª—è MUI
  "@emotion/styled": "^11.14.1"           // –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è MUI
}
```

**–î–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–∞:** Material Design —á–µ—Ä–µ–∑ Material-UI

### Canvas —Ä–µ–¥–∞–∫—Ç–æ—Ä

```json
{
  "konva": "^9.2.3",                      // 2D Canvas –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
  "react-konva": "^18.2.7"                // React bindings –¥–ª—è Konva
}
```

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –í–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä —à–∞–±–ª–æ–Ω–æ–≤
- Drag & drop —ç–ª–µ–º–µ–Ω—Ç—ã
- –ò–Ω—Å–ø–µ–∫—Ç–æ—Ä —Å–≤–æ–π—Å—Ç–≤
- Canvas —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø–∞–Ω–æ—Ä–∞–º–∏—Ä–æ–≤–∞–Ω–∏—è

### State Management

```json
{
  "zustand": "^5.0.8",                    // –õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π state manager
  "immer": "^10.2.0"                      // –ò–º–º—É—Ç–∞–±–µ–ª—å–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
}
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ store:**
- `useClubStore` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª—É–±–∞–º–∏ –∏ —à–∞–±–ª–æ–Ω–∞–º–∏
- `useEditorStore` - –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ (–≤—ã–±—Ä–∞–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã, zoom, pan)

### –£—Ç–∏–ª–∏—Ç—ã

```json
{
  "nanoid": "^5.1.6",                     // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö ID
  "react-colorful": "^5.6.1",             // Color picker
  "d3-shape": "^3.2.0"                    // –†–∞–±–æ—Ç–∞ —Å —Ñ–æ—Ä–º–∞–º–∏ –∏ –ø—É—Ç—è–º–∏
}
```

### Developer Tools

```json
{
  "typescript": "~5.9.3",
  "eslint": "^9.36.0",
  "typescript-eslint": "^8.45.0",
  "@types/react": "^18.3.12",
  "@types/node": "^24.6.0"
}
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- TypeScript —Å strict mode
- ESLint –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞
- Source maps –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### Build –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```typescript
// vite.config.ts
{
  base: '/route/admin/',                  // –ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
  build: {
    sourcemap: true,                      // Source maps –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
    rollupOptions: {
      manualChunks: {
        'react-vendor': [...],            // –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ vendor bundles
        'mui-vendor': [...]
      }
    }
  }
}
```

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- Code splitting (vendor chunks)
- Tree shaking
- –ú–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è
- Gzip compression

---

## üêç Backend: Python Server

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

**–Ø–∑—ã–∫:**
- **Python 3.11** (production)
- **Python 3.9** (—á–µ—Ä–µ–∑ nixpacks, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

**–§—Ä–µ–π–º–≤–æ—Ä–∫/–°–µ—Ä–≤–µ—Ä:**
- **Python HTTP Server** (http.server) - –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π HTTP —Å–µ—Ä–≤–µ—Ä
- **socketserver** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–∫–µ—Ç–∞–º–∏

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Single-threaded HTTP server
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
- REST API endpoints
- Session management

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

```txt
psycopg2-binary==2.9.9
```

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- **PostgreSQL** - –û—Å–Ω–æ–≤–Ω–∞—è –ë–î
- **psycopg2** - PostgreSQL –¥—Ä–∞–π–≤–µ—Ä –¥–ª—è Python

**–¢–∞–±–ª–∏—Ü—ã:**
- `athletes` - –î–∞–Ω–Ω—ã–µ –∞—Ç–ª–µ—Ç–æ–≤ Strava
- `tokens` - OAuth —Ç–æ–∫–µ–Ω—ã
- `user_sessions` - –°–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `clubs` - –ö–ª—É–±—ã –±–µ–≥—É–Ω–æ–≤
- `templates` - –®–∞–±–ª–æ–Ω—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- `analytics` - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–°—Ö–µ–º—ã –ë–î:**
```
db/schemas/
‚îú‚îÄ‚îÄ 01_main.sql          # –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
‚îú‚îÄ‚îÄ 02_admin.sql         # –ê–¥–º–∏–Ω—Å–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã (–∫–ª—É–±—ã, —à–∞–±–ª–æ–Ω—ã)
‚îú‚îÄ‚îÄ 03_analytics.sql     # –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
‚îî‚îÄ‚îÄ 04_init_clubs.sql    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª—É–±–æ–≤
```

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- **HMAC** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–µ–π –¥–ª—è session cookies
- **CORS** - –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞
- **CSP** (Content Security Policy) - –ó–∞—â–∏—Ç–∞ –æ—Ç XSS
- **Rate Limiting** - –ó–∞—â–∏—Ç–∞ –æ—Ç DDoS
- **Session Management** - –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Å–µ—Å—Å–∏–∏
- **Password Hashing** - –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (bcrypt/hmac)

**–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ Python:**
```python
import hmac
import hashlib
import secrets
from http.cookies import SimpleCookie
```

### API Endpoints

**–ü—É–±–ª–∏—á–Ω—ã–µ:**
- `GET /api/templates?clubId=X` - –ü–æ–ª—É—á–∏—Ç—å –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã
- `POST /api/strava/token` - OAuth token exchange
- `GET /api/analytics/...` - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

**–ê–¥–º–∏–Ω—Å–∫–∏–µ:**
- `GET /route/admin/api/clubs` - –°–ø–∏—Å–æ–∫ –∫–ª—É–±–æ–≤
- `GET /route/admin/api/templates` - –°–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤
- `POST /route/admin/api/templates/:id` - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —à–∞–±–ª–æ–Ω
- `DELETE /route/admin/api/templates/:id` - –£–¥–∞–ª–∏—Ç—å —à–∞–±–ª–æ–Ω
- `GET /route/admin/api/check-templates` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤
- `POST /route/admin/api/sync-templates` - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —à–∞–±–ª–æ–Ω–æ–≤

---

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: PostgreSQL

### –í–µ—Ä—Å–∏—è
- **PostgreSQL** (–≤–µ—Ä—Å–∏—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Ö–æ—Å—Ç–∏–Ω–≥–æ–º)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (JSONB, –∏–Ω–¥–µ–∫—Å—ã)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

**–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö:**
- `BIGSERIAL` - –ê–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç –¥–ª—è ID
- `JSONB` - JSON –¥–∞–Ω–Ω—ã–µ (—à–∞–±–ª–æ–Ω—ã, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
- `TIMESTAMP` - –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏
- `VARCHAR` - –°—Ç—Ä–æ–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª–∏–Ω—ã
- `TEXT` - –ë–æ–ª—å—à–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –ø–æ–ª—è

**–ò–Ω–¥–µ–∫—Å—ã:**
- –ü–æ `athlete_id`
- –ü–æ `club_id`
- –ü–æ `status` (–¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏)
- –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

---

## üöÄ DevOps & Deployment

### –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

**Railway.app** - –û—Å–Ω–æ–≤–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –¥–µ–ø–ª–æ—è

```json
// railway.json
{
  "build": {
    "builder": "NIXPACKS"
  },
  "deploy": {
    "startCommand": "python3 -u server.py",
    "healthcheckPath": "/health",
    "restartPolicyType": "ON_FAILURE"
  }
}
```

### Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```dockerfile
# Multi-stage build
FROM node:20 AS admin-build     # –°–±–æ—Ä–∫–∞ React –∞–¥–º–∏–Ω–∫–∏
FROM python:3.11-slim           # Python production image
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Multi-stage build –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞–∑–º–µ—Ä–∞
- Non-root user –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- Health checks
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–ª–æ–µ–≤

### Nixpacks (–¥–ª—è Railway)

```toml
# nixpacks.toml
[phases.setup]
nixPkgs = ["python39"]

[phases.install]
cmds = ["pip install -r requirements.txt"]
```

### Environment Variables

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:**
- `DATABASE_URL` - –°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
- `ADMIN_USERNAME` - –õ–æ–≥–∏–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- `ADMIN_PASSWORD` - –ü–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- `ADMIN_SESSION_SECRET` - –°–µ–∫—Ä–µ—Ç –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ —Å–µ—Å—Å–∏–π

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:**
- `PORT` - –ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ Railway)
- `HOST` - –•–æ—Å—Ç —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.0.0.0)

---

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞

### –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (package.json)

```json
{
  "devDependencies": {
    "live-server": "^1.2.2",        // Dev server
    "serve": "^14.2.1"               // Static file server
  },
  "dependencies": {
    "@mapbox/polyline": "^1.2.1"    // Polyline decoder
  }
}
```

### React Admin (admin/package.json)

**Dependencies (27 –ø–∞–∫–µ—Ç–æ–≤):**
- React —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞: react, react-dom, react-router-dom
- UI: @mui/material, @mui/icons-material
- State: zustand, immer
- Canvas: konva, react-konva
- –£—Ç–∏–ª–∏—Ç—ã: nanoid, react-colorful, d3-shape

**DevDependencies:**
- TypeScript + —Ç–∏–ø—ã
- Vite + –ø–ª–∞–≥–∏–Ω—ã
- ESLint + –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–†–∞–∑–º–µ—Ä bundle (production):**
```
index.js:           ~69 KB  (gzip: ~23 KB)
react-vendor.js:    ~205 KB (gzip: ~67 KB)
mui-vendor.js:      ~299 KB (gzip: ~92 KB)
```

**–ò—Ç–æ–≥–æ:** ~573 KB (–Ω–µ—Å–∂–∞—Ç—ã–π) ‚Üí ~182 KB (gzip)

### Backend (requirements.txt)

```txt
psycopg2-binary==2.9.9    # PostgreSQL driver
```

**–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ Python:**
- http.server, socketserver
- json, os, sys
- datetime, time
- urllib.parse
- hashlib, hmac, secrets
- collections

---

## üõ†Ô∏è Development Tools

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

**Frontend (–æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ):**
```bash
npm run dev              # Live reload server
npm run serve            # Static file server
```

**Frontend (React Admin):**
```bash
cd admin
npm run dev              # Vite dev server (HMR)
npm run build            # Production build
npm run preview          # Preview production build
```

**Backend:**
```bash
python3 server.py        # –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```

**Development —Å–∫—Ä–∏–ø—Ç—ã:**
- `start-dev.sh` - –ó–∞–ø—É—Å–∫ —Å ngrok –¥–ª—è OAuth

### –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –ë–î

**Python —Å–∫—Ä–∏–ø—Ç—ã:**
```bash
python3 check_templates.py           # –ü—Ä–æ–≤–µ—Ä–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤ –≤ –ë–î
python3 compare_templates.py         # –°—Ä–∞–≤–Ω–µ–Ω–∏–µ fallback —Å –ë–î
python3 sync_fallback_templates.py   # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —à–∞–±–ª–æ–Ω–æ–≤
python3 init_clubs.py                # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª—É–±–æ–≤
```

**–õ–æ–∫–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```bash
python3 check_template_sync_local.py # –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑ –ë–î
```

---

## üìä –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**Frontend:**
- Code splitting (3 –æ—Å–Ω–æ–≤–Ω—ã—Ö bundle)
- Lazy loading –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- Gzip compression (Railway)

**Backend:**
- Single-threaded (–ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ç–µ–∫—É—â–µ–π –Ω–∞–≥—Ä—É–∑–∫–∏)
- Connection pooling (—á–µ—Ä–µ–∑ psycopg2)
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
- Rate limiting

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ HTTPS only (–Ω–∞ Railway)
- ‚úÖ CORS protection
- ‚úÖ CSP headers
- ‚úÖ Session management —Å HMAC
- ‚úÖ Rate limiting
- ‚úÖ SQL injection protection (parameterized queries)
- ‚úÖ XSS protection
- ‚úÖ Secure cookies

### –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

**–¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
- Single-instance —Å–µ—Ä–≤–µ—Ä
- PostgreSQL –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è
- Stateless API

**–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è:**
- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ load balancer
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Redis)
- CDN –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
- Database connection pooling

---

## üåê –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### Strava API

**OAuth 2.0:**
- Authorization code flow
- Token refresh
- Scope: `read,activity:read_all`

**Endpoints:**
- `/api/v3/athlete` - –î–∞–Ω–Ω—ã–µ –∞—Ç–ª–µ—Ç–∞
- `/api/v3/activities` - –°–ø–∏—Å–æ–∫ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
- `/api/v3/activities/:id` - –î–µ—Ç–∞–ª–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
- `/api/v3/activities/:id/streams` - –î–∞–Ω–Ω—ã–µ –ø–æ—Ç–æ–∫–æ–≤

**–î–∞–Ω–Ω—ã–µ:**
- Polyline –º–∞—Ä—à—Ä—É—Ç–æ–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–¥–∏—Å—Ç–∞–Ω—Ü–∏—è, –≤—Ä–µ–º—è, –≤—ã—Å–æ—Ç–∞)
- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–¥–∞—Ç–∞, —Ç–∏–ø –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏)

---

## üìù –í–µ—Ä—Å–∏–∏ –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### Node.js
- **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:** 18+ –∏–ª–∏ 20+
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–±–æ—Ä–∫–∏ React –∞–¥–º–∏–Ω–∫–∏

### Python
- **Production:** 3.11
- **Nixpacks:** 3.9
- **–ú–∏–Ω–∏–º—É–º:** 3.8 (–¥–ª—è –≤—Å–µ—Ö –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ñ–∏—á)

### –ë—Ä–∞—É–∑–µ—Ä—ã
- **Chrome/Edge:** –ü–æ—Å–ª–µ–¥–Ω–∏–µ 2 –≤–µ—Ä—Å–∏–∏
- **Firefox:** –ü–æ—Å–ª–µ–¥–Ω–∏–µ 2 –≤–µ—Ä—Å–∏–∏
- **Safari:** –ü–æ—Å–ª–µ–¥–Ω–∏–µ 2 –≤–µ—Ä—Å–∏–∏
- **Mobile:** iOS Safari, Chrome Mobile

---

## üéØ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### –ü–æ—á–µ–º—É Vanilla JS –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è?

- ‚úÖ –õ–µ–≥–∫–æ–≤–µ—Å–Ω–æ—Å—Ç—å (–Ω–µ—Ç overhead –æ—Ç —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤)
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
- ‚úÖ –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ Canvas API
- ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏

### –ü–æ—á–µ–º—É React –¥–ª—è –∞–¥–º–∏–Ω–∫–∏?

- ‚úÖ –°–ª–æ–∂–Ω—ã–π UI (—Ä–µ–¥–∞–∫—Ç–æ—Ä —à–∞–±–ª–æ–Ω–æ–≤)
- ‚úÖ –ú–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ State management
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ —á–∞—Å—Ç—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö

### –ü–æ—á–µ–º—É Python HTTP Server?

- ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- ‚úÖ –ú–∏–Ω–∏–º—É–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è —Ç–µ–∫—É—â–∏—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
- ‚úÖ –õ–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ Flask/FastAPI –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### Canvas –∏ –≥—Ä–∞—Ñ–∏–∫–∞
- HTML5 Canvas API
- Konva.js (–≤ –∞–¥–º–∏–Ω–∫–µ)
- Custom canvas –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### State Management
- Zustand (React –∞–¥–º–∏–Ω–∫–∞)
- Custom store (Vanilla JS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)

### –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
- React Router (–∞–¥–º–∏–Ω–∫–∞)
- Custom routing (–æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)

### –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è
- CSS3 (–æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
- Material-UI / Emotion (–∞–¥–º–∏–Ω–∫–∞)
- Custom CSS modules

---

## üîÑ CI/CD

**–¢–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å:**
1. Push –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç
3. –ó–∞–ø—É—Å–∫–∞–µ—Ç —Ç–µ—Å—Ç—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)
4. –î–µ–ø–ª–æ–∏—Ç –Ω–∞ production

**–í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:**
- GitHub Actions –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- Pre-commit hooks
- Automated testing
- Staging environment

---

## üì¶ –†–∞–∑–º–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞

**–û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
- HTML/CSS/JS: ~500 KB (–Ω–µ—Å–∂–∞—Ç—ã–π)
- –°–∂–∞—Ç–∏–µ: Gzip –Ω–∞ Railway

**React Admin:**
- Production build: ~573 KB (–Ω–µ—Å–∂–∞—Ç—ã–π)
- Gzip: ~182 KB
- Source maps: ~2.5 MB (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)

**Backend:**
- Python server: ~50 KB
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: ~10 MB (psycopg2)

---

## üé® –î–∏–∑–∞–π–Ω –∏ UX

**–û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
- –ú–æ–±–∏–ª—å–Ω–æ-–ø–µ—Ä–≤—ã–π –ø–æ–¥—Ö–æ–¥
- –ù–∞—Ç–∏–≤–Ω—ã–π –º–æ–±–∏–ª—å–Ω—ã–π –æ–ø—ã—Ç
- PWA –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

**–ê–¥–º–∏–Ω–∫–∞:**
- Material Design
- –¢–µ–º–Ω–∞—è —Ç–µ–º–∞
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
- Drag & drop –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

---

*–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: 2024-11-14*
*–ê–∫—Ç—É–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è: 1.0*

